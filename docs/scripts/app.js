(()=>{function t(t,a){t&&a&&$.getJSON(`data/${a}?cache=`+Date.now()).done(function(a){t.empty();let e=[];for(let t=0;t<5;t++){let t=a.splice(Math.random()*a.length|0,1);e.push(t[0])}e.forEach(function(a){let e=a.question.split("####"),s=`<span class="question-line">${e[0]}</span>\n                                    <input type="text" class="user-input form-control" placeholder="answer">\n                                    <span class="question-line">${e[1]}</span>`,l=`<div class="question-item form-group">\n                        <div class="question" data-answer="${a.correctAnswer}">\n                            ${s}\n                        </div>\n                        <div class="common-mistakes hidden">\n                            ${function(t){let a="";return t.forEach(function(t){a+=`<div class="answer hidden" data-answer="${t.incorrectAnswer}">${t.explanation}</div>`}),a}(a.commonMistakes)}\n                        </div>\n                        <div class="answer generic hidden">\n                            ${a.explanation}\n                        </div>\n                    </div>`;t.append(l)})}).fail(function(t,a,e){console.log(a,e)})}function a(t,a){let e=!1;return t.forEach(function(t){t.toUpperCase().trim()==a.toUpperCase().trim()&&(e=!0)}),e}function e(t,a){if(!t||!a)return;$.getJSON(`data/${a}?cache=`+Date.now()).done(function(t){let a=t.splice(Math.random()*t.length|0,1);"old"==$(".translation-button").attr("data-language")?($(".flashcard").html(`<h2>${a[0].oldEnglish}</h2>`),$(".flashcard").data("flashcardAnswer",a[0].modernEnglish),$(".flashcard").data("partOfSpeech",a[0].partOfSpeech)):($(".flashcard").html(`<h2>${a[0].modernEnglish}</h2>`),$(".flashcard").data("flashcardAnswer",a[0].oldEnglish),$(".flashcard").data("partOfSpeech",a[0].partOfSpeech))});let e=$(".explanatory-text").attr("data-text");$(".flashcard").empty().removeClass("correct-flashcard incorrect-flashcard"),$(".explanatory-text").removeClass("darkorange-text darkgreen-text").html(e),$(".flashcard-row").find("input").val("")}$(document).ready(function(){let e,s=$("#question-wrapper");const l=$("#question-wrapper");let o=l.data("question-file");t(l,o),$(".special-character").on("click",function(t){t.preventDefault(),e&&e.val(e.val()+$(this).attr("data-char")).focus()}),s.on("focus","input",function(){e=$(this)}),$(".flashcard-row").on("focus","input",function(){e=$(this)}),$(".audio-button").on("click",function(){$(this).next(".audio-link").get(0).play()}),$(".audio-svg").on("click",function(){let t=$(this).attr("id");$("#audio-"+t).get(0).play()}),$("#additionalbutton").on("click",function(){const a=$("#question-wrapper");o=a.data("additional-questions"),t(a,o),$(this).removeClass("light-button").addClass("solid-button active"),$("#basicbutton").removeClass("solid-button active").addClass("light-button"),$("small").toggleClass("hide")}),$("#basicbutton").on("click",function(){const a=$("#question-wrapper");o=a.data("question-file"),t(a,o),$(this).removeClass("light-button").addClass("solid-button active"),$("#additionalbutton").removeClass("solid-button active").addClass("light-button"),$("small").toggleClass("hide")}),$("#hide-submit").on("click",function(){$(".table-hide").toggle(),$(this).find("span").toggleClass("hide")}),$("#macron-toggle").on("click",function(){event.preventDefault(),$(this).find("span").toggleClass("hide"),$(".nomacron").toggleClass("hide"),$(".macron").toggleClass("hide")}),$(".tooltip-header").each(function(){$(this).on("click",function(){$(this).closest(".grammar-tooltip").siblings(".grammar-tooltip").find(".card-body").addClass("hide"),$(this).next(".card-body").toggleClass("hide")})}),$("#submit").on("click",function(t){t.preventDefault(),$(this).addClass("hidden"),$("#again").removeClass("hidden"),$(".question").each(function(){let t=$(this).attr("data-answer").split("|"),e=$(this).find("input").val().trim(),s=a(t,e),l=null;s||$(this).siblings(".common-mistakes").find(".answer").each(function(){a([$(this).attr("data-answer")],e)&&(l=$(this))}),s?$(this).closest(".form-group").addClass("has-success").removeClass("has-error"):$(this).closest(".form-group").removeClass("has-success").addClass("has-error"),null!=l?l.removeClass("hidden").parent().removeClass("hidden"):$(this).siblings(".answer").removeClass("hidden")})}),$("#again").on("click",function(a){a.preventDefault();const e=$("#question-wrapper");let s;s=$("#additionalbutton").hasClass("active")?e.data("additional-questions"):e.data("question-file"),$(this).addClass("hidden"),$("#submit").removeClass("hidden"),t(e,s)}),$("#questionnaire-button").on("click",function(a){a.preventDefault();const e=$("#question-wrapper");let s=e.data("question-file");$(this).removeClass("light-button").addClass("solid-button"),$("#table-quiz-button").removeClass("solid-button").addClass("light-button"),t(e,s),$("small").replaceWith("<small>In the textboxes below, fill out the fully declined version of the word in brackets.</small>"),$("#table-submit").replaceWith('<button class="solid-button button" id="submit">Check</button>'),$("#table-try-again").replaceWith('<button class="solid-button button hidden" id="again">Try Again?</button>')})}),$(".modal-button").on("click",function(){const t=$(".modal-body"),a=t.data("question-file");e(t,a)}),$(".flashcard-check").on("click",function(){let t=$(".flashcard-row").find("input").val().trim(),e=$(".flashcard").data("flashcardAnswer").split("|"),s=$(".flashcard").data("partOfSpeech"),l=a(e,t),o=e.join(" / ");$(".flashcard").append("<h3>"+s+"</h3>"),$(".flashcard").find("h2").append(" â€” "+o),1==l?($(".flashcard").addClass("correct-flashcard"),$(".explanatory-text").addClass("darkgreen-text").html("Good Job!")):($(".flashcard").addClass("incorrect-flashcard"),$(".explanatory-text").addClass("darkorange-text").html("Try Again!")),$(".flashcard-check").addClass("hide"),$(".try-another").removeClass("hide")}),$(".flashcard-answer").on("keydown",function(t){let a=$(".flashcard-check").hasClass("hide");13===t.keyCode&&!1===a&&(t.preventDefault(),$(".flashcard-check").click())}),$(".try-another").on("click",function(){$(".flashcard-check").removeClass("hide"),$(".try-another").addClass("hide");const t=$(".modal-body"),a=t.data("question-file");e(t,a)}),$(".translation-button").on("click",function(){const t=$(".modal-body"),a=t.data("question-file");let s=$(".translation-button").attr("data-language"),l=$(".explanatory-text").attr("data-text"),o=$(".flashcard-answer").data("old-placeholder"),n=$(".flashcard-answer").data("new-placeholder");$(".explanatory-text").removeClass("darkorange-text darkgreen-text").html(l),$(".flashcard-row").find("input").val(""),$(".flashcard-check").removeClass("hide"),$(".try-another").addClass("hide"),"old"==s?($(".translation-button").attr("data-language","modern"),$(".translation-button").html('Modern English <i class="fas fa-exchange-alt"></i> Old English'),$(".flashcard").empty().removeClass("correct-flashcard incorrect-flashcard"),$(".flashcard-answer").attr("placeholder",o),e(t,a)):($(".translation-button").attr("data-language","old"),$(".translation-button").html('Old English <i class="fas fa-exchange-alt"></i> Modern English'),$(".flashcard").empty().removeClass("correct-flashcard incorrect-flashcard"),$(".flashcard-answer").attr("placeholder",n),e(t,a))}),$(".reader-word").on("click",function(t){if(t.preventDefault(),$(".show-old-english").hasClass("solid-button")){let t=$(this).text(),a=$(this).data("grammar"),e=$(this).data("translation");$(".reader-tooltip").removeClass("hide"),$(".reader-tooltip-body").find("p").empty(),$(".reader-tooltip-body").find("p").append("<strong>"+t+"</strong> - "+e+"<br><em>"+a+"</em>")}}),$(".show-old-english").on("click",function(t){t.preventDefault(),$(".comp-button-row button.solid-button").removeClass("solid-button").addClass("light-button"),$(".show-old-english").removeClass("light-button").addClass("solid-button"),$(".reading-comp").removeClass("col-sm-6").addClass("col-sm-9"),$(".reading-trans").addClass("hide"),$(".reader-tooltip-column").hasClass("hide")&&$(".reader-tooltip-column").removeClass("hide"),$(".challenge-tooltip").hasClass("challenge-selected")&&$(".challenge-tooltip").removeClass("challenge-selected")}),$(".show-trans").on("click",function(t){t.preventDefault(),$(".comp-button-row button.solid-button").removeClass("solid-button").addClass("light-button"),$(".show-trans").removeClass("light-button").addClass("solid-button"),$(".reading-comp").removeClass("col-sm-9").addClass("col-sm-6"),$(".reading-trans").removeClass("hide"),$(".reader-tooltip").addClass("hide"),$(".challenge-tooltip").hasClass("challenge-selected")&&$(".challenge-tooltip").removeClass("challenge-selected")}),$(".test-your-knowledge").on("click",function(t){t.preventDefault(),$(".comp-button-row button.solid-button").removeClass("solid-button").addClass("light-button"),$(".test-your-knowledge").removeClass("light-button").addClass("solid-button"),$(".challenge-tooltip").addClass("challenge-selected"),$(".reader-tooltip-column").addClass("hide"),$(".reading-trans").hasClass("hide")||($(".reading-trans").addClass("hide"),$(".reading-comp").removeClass("col-sm-6").addClass("col-sm-9"))}),$(".more-info").on("click",function(t){t.preventDefault(),$(".comp-button-row button.solid-button").removeClass("solid-button").addClass("light-button"),$(".more-info").removeClass("light-button").addClass("solid-button"),$(".reading-comp").removeClass("col-sm-9").addClass("col-sm-6"),$(".reader-tooltip").addClass("hide"),$(".challenge-tooltip").hasClass("challenge-selected")&&$(".challenge-tooltip").removeClass("challenge-selected")}),$(".close-icon").on("click",function(t){t.preventDefault(),$(".reader-tooltip-body").find("p").empty(),$(".reader-tooltip").addClass("hide")})})();