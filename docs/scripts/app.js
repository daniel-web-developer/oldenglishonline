(()=>{function a(a,t){a&&t&&$.getJSON(`data/${t}?cache=`+Date.now()).done(function(t){a.empty();let n=[];for(let a=0;a<5;a++){let a=t.splice(Math.random()*t.length|0,1);n.push(a[0])}n.forEach(function(t){let n=t.question.split("####"),s=`<span class="question-line">${n[0]}</span>\n                                    <input type="text" class="user-input form-control" placeholder="answer">\n                                    <span class="question-line">${n[1]}</span>`,e=`<div class="question-item form-group">\n                        <div class="question" data-answer="${t.correctAnswer}">\n                            ${s}\n                        </div>\n                        <div class="common-mistakes hidden">\n                            ${function(a){let t="";return a.forEach(function(a){t+=`<div class="answer hidden" data-answer="${a.incorrectAnswer}">${a.explanation}</div>`}),t}(t.commonMistakes)}\n                        </div>\n                        <div class="answer generic hidden">\n                            ${t.explanation}\n                        </div>\n                    </div>`;a.append(e)})}).fail(function(a,t,n){console.log(t,n)})}function t(a,t){let n=!1;return a.forEach(function(a){a.toUpperCase()==t.toUpperCase()&&(n=!0)}),n}function n(a,t){a&&t&&$.getJSON(`data/${t}?cache=`+Date.now()).done(function(a){let t=a.splice(Math.random()*a.length|0,1);"old"==$(".translation-button").attr("data-language")?($(".flashcard").html(`<h2>${t[0].oldEnglish}</h2>`),$(".flashcard").data("flashcardAnswer",t[0].modernEnglish),$(".flashcard").data("partOfSpeech",t[0].partOfSpeech)):($(".flashcard").html(`<h2>${t[0].modernEnglish}</h2>`),$(".flashcard").data("flashcardAnswer",t[0].oldEnglish),$(".flashcard").data("partOfSpeech",t[0].partOfSpeech))})}$(document).ready(function(){let n,s=$("#question-wrapper");const e=$("#question-wrapper");let o=e.data("question-file");a(e,o),$(".special-character").on("click",function(a){a.preventDefault(),n&&n.val(n.val()+$(this).attr("data-char")).focus()}),s.on("focus","input",function(){n=$(this)}),$(".flashcard-row").on("focus","input",function(){n=$(this)}),$(".audio-button").on("click",function(){$(this).next(".audio-link").get(0).play()}),$("#additionalbutton").on("click",function(){a($("#question-wrapper"),$(this).data("new-questions")),$(this).removeClass("light-button").addClass("solid-button"),$("#basicbutton").removeClass("solid-button").addClass("light-button active"),$("#again").data("new-questions")}),$("#basicbutton").on("click",function(){a($("#question-wrapper"),$(this).data("new-questions")),$(this).removeClass("light-button").addClass("solid-button"),$("#additionalbutton").removeClass("solid-button").addClass("light-button active"),$("#again").data("new-questions")}),$("#hide-submit").on("click",function(){$(".table-hide").toggle(),$(this).find("span").toggleClass("hide")}),$(".tooltip-header").each(function(){$(this).on("click",function(){$(this).closest(".grammar-tooltip").siblings(".grammar-tooltip").find(".card-body").addClass("hide"),$(this).next(".card-body").toggleClass("hide")})}),$("#submit").on("click",function(a){a.preventDefault(),$(this).addClass("hidden"),$("#again").removeClass("hidden"),$(".question").each(function(){let a=$(this).attr("data-answer").split("|"),n=$(this).find("input").val().trim(),s=t(a,n),e=null;s||$(this).siblings(".common-mistakes").find(".answer").each(function(){t([$(this).attr("data-answer")],n)&&(e=$(this))}),s?$(this).closest(".form-group").addClass("has-success").removeClass("has-error"):$(this).closest(".form-group").removeClass("has-success").addClass("has-error"),null!=e?e.removeClass("hidden").parent().removeClass("hidden"):$(this).siblings(".answer").removeClass("hidden")})}),$("#again").on("click",function(t){t.preventDefault();const n=$("#question-wrapper");let s;s=$("#additionalbutton").hasClass("active")?$("#additionalbutton").data("new-questions"):n.data("question-file"),$(this).addClass("hidden"),$("#submit").removeClass("hidden"),a(n,s)}),$("#questionnaire-button").on("click",function(t){t.preventDefault();const n=$("#question-wrapper");let s=n.data("question-file");$(this).removeClass("light-button").addClass("solid-button"),$("#table-quiz-button").removeClass("solid-button").addClass("light-button"),a(n,s),$("small").replaceWith("<small>In the textboxes below, fill out the fully declined version of the word in brackets.</small>"),$("#table-submit").replaceWith('<button class="solid-button button" id="submit">Check</button>'),$("#table-try-again").replaceWith('<button class="solid-button button hidden" id="again">Try Again?</button>')})}),$(".modal-button").on("click",function(){const a=$(".modal-body"),t=a.data("question-file");n(a,t)}),$(".flashcard-check").on("click",function(){let a=$(".flashcard-row").find("input").val().trim(),t=$(".flashcard").data("flashcardAnswer"),n=$(".flashcard").data("partOfSpeech");$(".flashcard").append("<h3>"+n+"</h3>"),$(".flashcard").find("h2").append(" â€” "+t),t.toUpperCase()==a.toUpperCase()?$(".flashcard").addClass("correct-flashcard"):$(".flashcard").addClass("incorrect-flashcard"),$(".flashcard-check").addClass("hide"),$(".try-another").removeClass("hide")}),$(".flashcard-answer").on("keydown",function(a){let t=$(".flashcard-check").hasClass("hide");13===a.keyCode&&!1===t&&(a.preventDefault(),$(".flashcard-check").click())}),$(".try-another").on("click",function(){$(".flashcard").empty().removeClass("correct-flashcard incorrect-flashcard");const a=$(".modal-body"),t=a.data("question-file");n(a,t),$(".flashcard-row").find("input").val(""),$(".flashcard-check").removeClass("hide"),$(".try-another").addClass("hide")}),$(".translation-button").on("click",function(){const a=$(".modal-body"),t=a.data("question-file");let s=$(".translation-button").attr("data-language");$(".flashcard-row").find("input").val(""),$(".flashcard-check").removeClass("hide"),$(".try-another").addClass("hide"),"old"==s?($(".translation-button").attr("data-language","modern"),$(".translation-button").html('Modern English <i class="fas fa-exchange-alt"></i> Old English'),$(".flashcard").empty().removeClass("correct-flashcard incorrect-flashcard"),n(a,t)):($(".translation-button").attr("data-language","old"),$(".translation-button").html('Old English <i class="fas fa-exchange-alt"></i> Modern English'),$(".flashcard").empty().removeClass("correct-flashcard incorrect-flashcard"),n(a,t))})})();